import { useState, useEffect, startTransition } from 'react';
import axios from 'axios';
import ReactMarkdown from 'react-markdown';
import { InlineMath, BlockMath } from 'react-katex';
import 'katex/dist/katex.min.css';
import remarkMath from 'remark-math';
import rehypeKatex from 'rehype-katex';

interface QuizQuestion {
  question: string;
  options: (string | React.ReactElement)[];
  correctAnswer: string | React.ReactElement;
  explanation: React.ReactNode;
}

const MathChapter1 = () => {
  const [message, setMessage] = useState('');
  const [chatHistory, setChatHistory] = useState<{ role: string; content: string }[]>([]);
  const [loading, setLoading] = useState(false);
  const [isChatModalOpen, setIsChatModalOpen] = useState(false);
  const [isQuizModalOpen, setIsQuizModalOpen] = useState(false);
  const [quizAnswers, setQuizAnswers] = useState<{ [key: number]: string }>({});
  const [quizSubmitted, setQuizSubmitted] = useState(false);
  const [score, setScore] = useState(0);
  const [showPopup, setShowPopup] = useState(true);

  const quizQuestions: QuizQuestion[] = [
    {
      question: 'ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛рж░ рж╕ржВржЬрзНржЮрж╛ ржХрзА?',
      options: [
        'ржпрзЗ рж╕ржВржЦрзНржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ ржирж╛',
        'ржпрзЗ рж╕ржВржЦрзНржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝, ржпрзЗржЦрж╛ржирзЗ рж╣рж░ рж╢рзВржирзНржп ржиржпрж╝',
        'ржпрзЗ рж╕ржВржЦрзНржпрж╛рж░ ржжрж╢ржорж┐ржХ ржЕржВрж╢ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ рж╣ржпрж╝ ржирж╛',
        'ржпрзЗ рж╕ржВржЦрзНржпрж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛',
      ],
      correctAnswer: 'ржпрзЗ рж╕ржВржЦрзНржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝, ржпрзЗржЦрж╛ржирзЗ рж╣рж░ рж╢рзВржирзНржп ржиржпрж╝',
      explanation: (
        <>
          ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ рж╣рж▓ ржПржоржи рж╕ржВржЦрзНржпрж╛ ржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝, ржпрзЗржоржи рзз/рзи, рзй/рзк ржмрж╛ рзж.рзнрзлред ржПржЦрж╛ржирзЗ рж╣рж░ ржПржмржВ рж▓ржм ржкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛ ржПржмржВ рж╣рж░ рж╢рзВржирзНржп ржиржпрж╝ред
        </>
      ),
    },
    {
      question: 'ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛рж░ ржЙржжрж╛рж╣рж░ржг ржХрзЛржиржЯрж┐?',
      options: ['рзз/рзи', 'рзж.рзйрзйрзй...', <InlineMath math="\sqrt{2}" />, 'рзк/рзл'],
      correctAnswer: <InlineMath math="\sqrt{2}" />,
      explanation: (
        <>
          ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ рж╣рж▓ ржПржоржи рж╕ржВржЦрзНржпрж╛ ржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ ржирж╛ ржПржмржВ ржпрж╛рж░ ржжрж╢ржорж┐ржХ ржЕржВрж╢ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзЗ ржирж╛ред <InlineMath math="\sqrt{2}" /> ржПрж░ ржорж╛ржи ржкрзНрж░рж╛ржпрж╝ рзз.рзкрззрзк, ржпрж╛ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзЗ ржирж╛ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржиржЯрж┐ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛?',
      options: ['рззрзи', 'рзирзл', 'рзйрзи', 'рзлрзж'],
      correctAnswer: 'рзирзл',
      explanation: (
        <>
          ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛ рж╣рж▓ ржПржоржи рж╕ржВржЦрзНржпрж╛ ржпрж╛ ржХрзЛржирзЛ ржкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧред ржпрзЗржоржи, рзирзл = рзл ├Ч рзл, рждрж╛ржЗ ржПржЯрж┐ ржкрзВрж░рзНржгржмрж░рзНржЧред
        </>
      ),
    },
    {
      question: 'ржмрж░рзНржЧржорзВрж▓ ржХрзА?',
      options: [
        'ржХрзЛржирзЛ рж╕ржВржЦрзНржпрж╛рж░ ржЧрзБржгржлрж▓',
        'ржХрзЛржирзЛ ржмрж░рзНржЧрзЗрж░ ржорзВрж▓ рж╕ржВржЦрзНржпрж╛',
        'ржХрзЛржирзЛ рж╕ржВржЦрзНржпрж╛рж░ ржмрж┐ржкрж░рзАржд ржорж╛ржи',
        'ржХрзЛржирзЛ рж╕ржВржЦрзНржпрж╛рж░ ржжрзНржмрж┐ржЧрзБржг ржорж╛ржи',
      ],
      correctAnswer: 'ржХрзЛржирзЛ ржмрж░рзНржЧрзЗрж░ ржорзВрж▓ рж╕ржВржЦрзНржпрж╛',
      explanation: (
        <>
          ржмрж░рзНржЧржорзВрж▓ рж╣рж▓ ржПржоржи рж╕ржВржЦрзНржпрж╛ ржпрж╛рж░ ржмрж░рзНржЧ ржХрж░рж▓рзЗ ржкрзНрж░ржжрждрзНржд рж╕ржВржЦрзНржпрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред ржпрзЗржоржи, рзп ржПрж░ ржмрж░рзНржЧржорзВрж▓ рзй, ржХрж╛рж░ржг <InlineMath math="3 \times 3 = 9" />ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржи рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзи ржерж╛ржХрж▓рзЗ рждрж╛ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣ржмрзЗ ржирж╛ ржХрзЗржи?',
      options: [
        'ржХрж╛рж░ржг ржПржЯрж┐ ржмрж┐ржЬрзЛржбрж╝ рж╕ржВржЦрзНржпрж╛',
        'ржХрж╛рж░ржг ржмрж░рзНржЧрж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзж, рзз, рзк, рзл, рзм, рзп рж╣ржпрж╝',
        'ржХрж╛рж░ржг ржПржЯрж┐ ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ ржиржпрж╝',
        'ржХрж╛рж░ржг ржПржЯрж┐ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛',
      ],
      correctAnswer: 'ржХрж╛рж░ржг ржмрж░рзНржЧрж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзж, рзз, рзк, рзл, рзм, рзп рж╣ржпрж╝',
      explanation: (
        <>
          ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рж╢рзБржзрзБ рзж, рзз, рзк, рзл, рзм, ржмрж╛ рзп ржерж╛ржХрзЗред рзи ржПржЗ рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржирзЗржЗ, рждрж╛ржЗ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзи ржерж╛ржХрж▓рзЗ рждрж╛ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣ржмрзЗ ржирж╛ред
        </>
      ),
    },
    {
      question: 'рзйрзм ржПрж░ ржмрж░рзНржЧржорзВрж▓ ржХржд?',
      options: ['рзк', 'рзл', 'рзм', 'рзн'],
      correctAnswer: 'рзм',
      explanation: (
        <>
          рзйрзм ржПрж░ ржмрж░рзНржЧржорзВрж▓ рзм, ржХрж╛рж░ржг <InlineMath math="6 \times 6 = 36" />ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржи рж╕ржВржЦрзНржпрж╛рж░ рж╢рзЗрж╖рзЗ ржмрж┐ржЬрзЛржбрж╝ рж╕ржВржЦрзНржпржХ рж╢рзВржирзНржп ржерж╛ржХрж▓рзЗ рждрж╛ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣ржмрзЗ ржирж╛?',
      options: ['рззрзжрзж', 'рззрзжрзжрзж', 'рззрзжрзжрзжрзж', 'рззрзжрзжрзжрзжрзж'],
      correctAnswer: 'рззрзжрзжрзж',
      explanation: (
        <>
          ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ рж╢рзЗрж╖рзЗ ржЬрзЛржбрж╝ рж╕ржВржЦрзНржпржХ рж╢рзВржирзНржп ржерж╛ржХрзЗред рззрзжрзжрзж-ржПрж░ рж╢рзЗрж╖рзЗ рзйржЯрж┐ рж╢рзВржирзНржп (ржмрж┐ржЬрзЛржбрж╝), рждрж╛ржЗ ржПржЯрж┐ ржкрзВрж░рзНржгржмрж░рзНржЧ ржиржпрж╝ред
        </>
      ),
    },
    {
      question: 'ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ ржкржжрзНржзрждрж┐рждрзЗ рззрзкрзк ржПрж░ ржмрж░рзНржЧржорзВрж▓ ржХрзАржнрж╛ржмрзЗ ржирж┐рж░рзНржгржпрж╝ ржХрж░рж╛ рж╣ржпрж╝?',
      options: [
        'рззрзкрзк ржХрзЗ ржЧрзБржг ржХрж░рзЗ',
        'рззрзкрзк ржХрзЗ ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржЬрзЛржбрж╝рж╛ ржерзЗржХрзЗ ржПржХржЯрж┐ ржХрж░рзЗ ржирж┐ржпрж╝рзЗ ржЧрзБржгржлрж▓ ржмрзЗрж░ ржХрж░рж╛',
        'рззрзкрзк ржХрзЗ ржнрж╛ржЧ ржХрж░рзЗ',
        'рззрзкрзк ржПрж░ ржжрж╢ржорж┐ржХ ржорж╛ржи ржирж┐ржпрж╝рзЗ',
      ],
      correctAnswer: 'рззрзкрзк ржХрзЗ ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржЬрзЛржбрж╝рж╛ ржерзЗржХрзЗ ржПржХржЯрж┐ ржХрж░рзЗ ржирж┐ржпрж╝рзЗ ржЧрзБржгржлрж▓ ржмрзЗрж░ ржХрж░рж╛',
      explanation: (
        <>
          рззрзкрзк = рзи ├Ч рзи ├Ч рзи ├Ч рзи ├Ч рзй ├Ч рзйред ржкрзНрж░рждрж┐ ржЬрзЛржбрж╝рж╛ ржерзЗржХрзЗ ржПржХржЯрж┐ ржирж┐ржпрж╝рзЗ: рзи ├Ч рзй = рззрзиред рждрж╛ржЗ <InlineMath math="\sqrt{144} = 12" />ред
        </>
      ),
    },
    {
      question: 'ржнрж╛ржЧ ржкржжрзНржзрждрж┐рждрзЗ ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржкрзНрж░ржержо ржзрж╛ржк ржХрзА?',
      options: [
        'рж╕ржВржЦрзНржпрж╛ржЯрж┐ржХрзЗ ржжрзБржЗ ржжрзНржмрж╛рж░рж╛ ржнрж╛ржЧ ржХрж░рж╛',
        'рж╕ржВржЦрзНржпрж╛ржЯрж┐ржХрзЗ ржЬрзЛржбрж╝рж╛ржпрж╝ ржЬрзЛржбрж╝рж╛ржпрж╝ ржмрж┐ржнржХрзНржд ржХрж░рж╛',
        'рж╕ржВржЦрзНржпрж╛ржЯрж┐рж░ ржжрж╢ржорж┐ржХ ржорж╛ржи ржирж┐рж░рзНржгржпрж╝',
        'рж╕ржВржЦрзНржпрж╛ржЯрж┐рж░ ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ ржирж┐рж░рзНржгржпрж╝',
      ],
      correctAnswer: 'рж╕ржВржЦрзНржпрж╛ржЯрж┐ржХрзЗ ржЬрзЛржбрж╝рж╛ржпрж╝ ржЬрзЛржбрж╝рж╛ржпрж╝ ржмрж┐ржнржХрзНржд ржХрж░рж╛',
      explanation: (
        <>
          ржнрж╛ржЧ ржкржжрзНржзрждрж┐рждрзЗ ржкрзНрж░ржержорзЗ рж╕ржВржЦрзНржпрж╛рж░ ржЕржЩрзНржХржЧрзБрж▓рзЛржХрзЗ ржбрж╛ржи ржерзЗржХрзЗ ржмрж╛ржорзЗ ржЬрзЛржбрж╝рж╛ржпрж╝ ржЬрзЛржбрж╝рж╛ржпрж╝ ржнрж╛ржЧ ржХрж░рж╛ рж╣ржпрж╝ред
        </>
      ),
    },
    {
      question: 'рзж.рзйрзм ржПрж░ ржмрж░рзНржЧржорзВрж▓ ржХржд?',
      options: ['рзж.рзм', 'рзж.рзжрзм', 'рзж.рзйрзм', 'рзж.рзжрзжрзм'],
      correctAnswer: 'рзж.рзм',
      explanation: (
        <>
          рзж.рзйрзм = рзйрзм/рззрзжрзжред рждрж╛ржЗ <InlineMath math="\sqrt{0.36} = \sqrt{36} / \sqrt{100} = 6/10 = 0.6" />ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржи рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзп ржерж╛ржХржмрзЗ?',
      options: ['рзи', 'рзй', 'рзк', 'рзм'],
      correctAnswer: 'рзй',
      explanation: (
        <>
          рзй ├Ч рзй = рзп ржПржмржВ рзн ├Ч рзн = рзкрзпред рждрж╛ржЗ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзй ржмрж╛ рзн ржерж╛ржХрж▓рзЗ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзп рж╣ржмрзЗред
        </>
      ),
    },
    {
      question: 'рззрзкрзн ржХрзЗ ржХрзЛржи ржХрзНрж╖рзБржжрзНрж░рждржо рж╕ржВржЦрзНржпрж╛ ржжрзНржмрж╛рж░рж╛ ржЧрзБржг ржХрж░рж▓рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣ржмрзЗ?',
      options: ['рзи', 'рзй', 'рзл', 'рзн'],
      correctAnswer: 'рзй',
      explanation: (
        <>
          рззрзкрзн = рзй ├Ч рзн ├Ч рзнред ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣рждрзЗ ржЖрж░рзЗржХржЯрж┐ рзй ржкрзНрж░ржпрж╝рзЛржЬржиред рждрж╛ржЗ рззрзкрзн ├Ч рзй = рзкрзкрзз = рзирзз ├Ч рзирззред
        </>
      ),
    },
    {
      question: 'рзкрзмрзйрзп ржерзЗржХрзЗ ржХрзЛржи ржХрзНрж╖рзБржжрзНрж░рждржо рж╕ржВржЦрзНржпрж╛ ржмрж┐ржпрж╝рзЛржЧ ржХрж░рж▓рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣ржмрзЗ?',
      options: ['рззрзл', 'рзирзж', 'рзирзл', 'рзйрзж'],
      correctAnswer: 'рззрзл',
      explanation: (
        <>
          рзмрзо ├Ч рзмрзо = рзкрзмрзирзкред рзкрзмрзйрзп тИТ рзкрзмрзирзк = рззрзлред рждрж╛ржЗ рззрзл ржмрж┐ржпрж╝рзЛржЧ ржХрж░рж▓рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржиржЯрж┐ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛?',
      options: ['рзз.рзирзл', <InlineMath math="\sqrt{25}" />, <InlineMath math="\sqrt{72}" />, 'рзк/рзн'],
      correctAnswer: <InlineMath math="\sqrt{72}" />,
      explanation: (
        <>
          <InlineMath math="\sqrt{72}" /> ржПрж░ ржорж╛ржи ржкрзНрж░рж╛ржпрж╝ рзо.рзкрзорзл, ржпрж╛ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзЗ ржирж╛ ржПржмржВ ржнржЧрзНржирж╛ржВрж╢рзЗ ржкрзНрж░ржХрж╛рж╢ ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛ред рждрж╛ржЗ ржПржЯрж┐ ржЕржорзВрж▓ржжред
        </>
      ),
    },
    {
      question: 'ржХрзНрж░ржорж┐ржХ рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржЕржирзНрждрж░ ржХрзАржнрж╛ржмрзЗ ржирж┐рж░рзНржгржпрж╝ ржХрж░рж╛ рж╣ржпрж╝?',
      options: [
        <InlineMath math="(x+1)^2 - x^2 = 2x + 1" />,
        <InlineMath math="(x+1)^2 - x^2 = x + 1" />,
        <InlineMath math="(x+1)^2 - x^2 = 2x" />,
        <InlineMath math="(x+1)^2 - x^2 = x" />,
      ],
      correctAnswer: <InlineMath math="(x+1)^2 - x^2 = 2x + 1" />,
      explanation: (
        <>
          ржжрзБржЯрж┐ ржХрзНрж░ржорж┐ржХ рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржЕржирзНрждрж░ рж╣рж▓: <InlineMath math="(x+1)^2 - x^2 = x^2 + 2x + 1 - x^2 = 2x + 1" />ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржи рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзм ржерж╛ржХржмрзЗ?',
      options: ['рзи', 'рзй', 'рзк', 'рзл'],
      correctAnswer: 'рзк',
      explanation: (
        <>
          рзк ├Ч рзк = рззрзм ржПржмржВ рзм ├Ч рзм = рзйрзмред рждрж╛ржЗ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзк ржмрж╛ рзм ржерж╛ржХрж▓рзЗ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзм рж╣ржмрзЗред
        </>
      ),
    },
    {
      question: 'рззрзирзпрзм ржЖржоржЧрж╛ржЫрзЗрж░ ржмрж░рзНржЧржорзВрж▓ ржХржд?',
      options: ['рзйрзк', 'рзйрзм', 'рзйрзо', 'рзкрзж'],
      correctAnswer: 'рзйрзм',
      explanation: (
        <>
          <InlineMath math="\sqrt{1296} = 36" />, ржХрж╛рж░ржг рзйрзм ├Ч рзйрзм = рззрзирзпрзмред
        </>
      ),
    },
    {
      question: 'рзж.рзжрзжрзирзпрззрзм ржПрж░ ржмрж░рзНржЧржорзВрж▓ ржХржд?',
      options: ['рзж.рзжрзлрзк', 'рзж.рзжрзжрзлрзк', 'рзж.рзлрзк', 'рзж.рзжрзжрзжрзлрзк'],
      correctAnswer: 'рзж.рзжрзлрзк',
      explanation: (
        <>
          рзж.рзжрзжрзирзпрззрзм = рзирзпрззрзм/рззрзжрзжрзжрзжрзжрзжред рждрж╛ржЗ <InlineMath math="\sqrt{2916} = 54" /> ржПржмржВ <InlineMath math="\sqrt{1000000} = 1000" />ред рж╕рзБрждрж░рж╛ржВ <InlineMath math="\sqrt{0.002916} = 54/1000 = 0.054" />ред
        </>
      ),
    },
    {
      question: 'тИЪ(рзкрзп/рзмрзк) ржПрж░ ржорж╛ржи ржХржд?',
      options: ['рзн/рзо', 'рзо/рзн', 'рзм/рзо', 'рзн/рзп'],
      correctAnswer: 'рзн/рзо',
      explanation: (
        <>
          <InlineMath math="\sqrt{49/64} = \sqrt{49} / \sqrt{64} = 7/8" />ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржи рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзз ржерж╛ржХрж▓рзЗ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ ржХрзА рж╣ржмрзЗ?',
      options: ['рзж', 'рзз', 'рзк', 'рзп'],
      correctAnswer: 'рзз',
      explanation: (
        <>
          рзз ├Ч рзз = рзз ржПржмржВ рзп ├Ч рзп = рзорззред рждрж╛ржЗ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзз ржмрж╛ рзп ржерж╛ржХрж▓рзЗ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзз рж╣ржмрзЗред
        </>
      ),
    },
    {
      question: 'рзлрзмрзнрзирзо рж╕рзИржирзНржпрзЗрж░ ржмрж░рзНржЧржорзВрж▓ ржХржд?',
      options: ['рзирзйрзм', 'рзирзйрзо', 'рзирзкрзж', 'рзирзкрзи'],
      correctAnswer: 'рзирзйрзо',
      explanation: (
        <>
          <InlineMath math="\sqrt{56728} = 238" />, ржХрж╛рж░ржг рзирзйрзо ├Ч рзирзйрзо = рзлрзмрзнрзирзоред
        </>
      ),
    },
    {
      question: 'рж╕ржВржЦрзНржпрж╛рж░рзЗржЦрж╛ржпрж╝ тИЪрзи ржПрж░ ржЕржмрж╕рзНржерж╛ржи ржХрзАржнрж╛ржмрзЗ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рж╛ рж╣ржпрж╝?',
      options: [
        'ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ ржжрзНржмрж╛рж░рж╛',
        'ржЬрзНржпрж╛ржорж┐рждрж┐ржХ ржкржжрзНржзрждрж┐ ржмрж╛ ржЖрж╕ржирзНржи ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ',
        'ржжрж╢ржорж┐ржХ ржнржЧрзНржирж╛ржВрж╢ ржжрж┐ржпрж╝рзЗ',
        'ржнрж╛ржЧ ржкржжрзНржзрждрж┐ ржжрж┐ржпрж╝рзЗ',
      ],
      correctAnswer: 'ржЬрзНржпрж╛ржорж┐рждрж┐ржХ ржкржжрзНржзрждрж┐ ржмрж╛ ржЖрж╕ржирзНржи ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ',
      explanation: (
        <>
          <InlineMath math="\sqrt{2}" /> ржПржХржЯрж┐ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛, ржпрж╛рж░ ржорж╛ржи ржкрзНрж░рж╛ржпрж╝ рзз.рзкрззрзкред ржПржЯрж┐ рж╕ржВржЦрзНржпрж╛рж░рзЗржЦрж╛ржпрж╝ ржЬрзНржпрж╛ржорж┐рждрж┐ржХ ржкржжрзНржзрждрж┐ ржмрж╛ ржЖрж╕ржирзНржи ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рж╛ рж╣ржпрж╝ред
        </>
      ),
    },
    {
      question: 'ржХрзЛржиржЯрж┐ ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛?',
      options: [<InlineMath math="\sqrt{3}" />, 'рзз.рзжрзлрзмрзй', <InlineMath math="\sqrt{72}" />, '╧А'],
      correctAnswer: 'рзз.рзжрзлрзмрзй',
      explanation: (
        <>
          рзз.рзжрзлрзмрзй ржПржХржЯрж┐ ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛, ржХрж╛рж░ржг ржПржЯрж┐ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ (рззрзжрзлрзмрзй/рззрзжрзжрзжрзж)ред
        </>
      ),
    },
    {
      question: 'рзпрзнрзи ржХрзЗ ржХрзЛржи ржХрзНрж╖рзБржжрзНрж░рждржо рж╕ржВржЦрзНржпрж╛ ржжрзНржмрж╛рж░рж╛ ржнрж╛ржЧ ржХрж░рж▓рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣ржмрзЗ?',
      options: ['рзи', 'рзй', 'рзк', 'рзл'],
      correctAnswer: 'рзй',
      explanation: (
        <>
          рзпрзнрзи = рзи ├Ч рзи ├Ч рзй ├Ч рзй ├Ч рзй ├Ч рзй ├Ч рзйред ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣рждрзЗ рзй ржжрзНржмрж╛рж░рж╛ ржнрж╛ржЧ ржХрж░рж▓рзЗ: рзпрзнрзи ├╖ рзй = рзйрзирзк = рззрзо ├Ч рззрзоред
        </>
      ),
    },
    {
      question: 'тИЪ(рзз рзк/рзирзл) ржПрж░ ржорж╛ржи ржХржд?',
      options: ['рзз рзз/рзл', 'рзз рзи/рзл', 'рзз рзй/рзл', 'рзз рзк/рзл'],
      correctAnswer: 'рзз рзи/рзл',
      explanation: (
        <>
          рзз рзк/рзирзл = рзирзп/рзирзлред рждрж╛ржЗ <InlineMath math="\sqrt{29/25} = \sqrt{29} / \sqrt{25} = 7/5" /> = рзз рзи/рзлред
        </>
      ),
    },
    {
      question: 'ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржХрзЛржи ржкржжрзНржзрждрж┐рждрзЗ ржЬрзЛржбрж╝рж╛ ржЧрзБржгржирзАржпрж╝ржХ ржерзЗржХрзЗ ржПржХржЯрж┐ ржХрж░рзЗ ржирзЗржУржпрж╝рж╛ рж╣ржпрж╝?',
      options: ['ржнрж╛ржЧ ржкржжрзНржзрждрж┐', 'ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ ржкржжрзНржзрждрж┐', 'ржжрж╢ржорж┐ржХ ржкржжрзНржзрждрж┐', 'ржЖрж╕ржирзНржи ржорж╛ржи ржкржжрзНржзрждрж┐'],
      correctAnswer: 'ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ ржкржжрзНржзрждрж┐',
      explanation: (
        <>
          ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ ржкржжрзНржзрждрж┐рждрзЗ рж╕ржВржЦрзНржпрж╛ржХрзЗ ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХрзЗ ржнрж╛ржЧ ржХрж░рзЗ ржЬрзЛржбрж╝рж╛ ржерзЗржХрзЗ ржПржХржЯрж┐ ржХрж░рзЗ ржирж┐ржпрж╝рзЗ ржЧрзБржгржлрж▓ ржмрзЗрж░ ржХрж░рж╛ рж╣ржпрж╝ред
        </>
      ),
    },
  ];

  useEffect(() => {
    const timer = setTimeout(() => setShowPopup(false), 8000);
    return () => clearTimeout(timer);
  }, []);

  const handleSubmit = () => {
    if (!message.trim()) return;

    startTransition(() => {
      setLoading(true);
      setChatHistory(prev => [...prev, { role: 'user', content: message }]);

      axios
        .post('http://localhost:8001/query', { book: 'ржЧржгрж┐ржд', chapter: 'ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛', query: message })
        .then(response => {
          const content = response.data.response;
          setChatHistory(prev => [...prev, { role: 'assistant', content }]);
        })
        .catch(error => {
          console.error('API Error:', error.message);
          setChatHistory(prev => [...prev, { role: 'assistant', content: 'ржжрзБржГржЦрж┐ржд, рждрзНрж░рзБржЯрж┐ ржШржЯрзЗржЫрзЗред ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред' }]);
        })
        .finally(() => {
          setMessage('');
          setLoading(false);
        });
    });
  };

  const handleQuizSubmit = () => {
    let correctCount = 0;
    quizQuestions.forEach((q, index) => {
      const userAnswer = quizAnswers[index];
      const correctAnswerValue = typeof q.correctAnswer === 'string' ? q.correctAnswer : q.correctAnswer.props.math;
      if (userAnswer === correctAnswerValue) {
        correctCount++;
      }
    });
    setScore(correctCount);
    setQuizSubmitted(true);
  };

  const handleQuizReset = () => {
    setQuizAnswers({});
    setQuizSubmitted(false);
    setScore(0);
  };

  return (
    <div className="min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 ">
      {showPopup && (
        <div className="fixed top-4 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white px-6 py-3 rounded-lg shadow-lg z-50">
          ржПржЗ ржЕржзрзНржпрж╛ржпрж╝рзЗрж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ ржХрж░рзБржи
        </div>
      )}

      <div className="fixed bottom-8 right-8 space-y-4 z-50">
        <button
          onClick={() => setIsChatModalOpen(true)}
          className="bg-blue-600 text-white rounded-full w-20 h-20 flex items-center justify-center shadow-xl hover:scale-110 transition-transform duration-300"
        >
          <img
            src="https://i.postimg.cc/nVXP4VNH/fb0d8418-075d-4bdf-9817-67547df51039-removalai-preview.png"
            alt="Chat Icon"
            className="w-12 h-12"
          />
        </button>
        <button
          onClick={() => setIsQuizModalOpen(true)}
          className="bg-green-500 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg hover:scale-110 transition-transform duration-300"
        >
          <svg className="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92c-.5.51-.86.97-1.04 1.69-.08.32-.13.68-.13 1.14h-2v-.5c0-.66.22-1.2.64-1.62l1.1-1.12c.31-.32.56-.74.56-1.25 0-.93-.75-1.69-1.68-1.69-.92 0-1.67.76-1.67 1.69H8c0-1.656 1.344-3 3-3s3 1.344 3 3c0 .66-.19 1.28-.6-1.74z" />
          </svg>
        </button>
      </div>

      <div className="max-w-4xl mx-auto bg-blue-100 dark:bg-blue-900 border border-blue-300 dark:border-blue-700 rounded-lg p-6 mb-6 text-center">
        <h2 className="text-2xl font-bold text-blue-800 mb-2">ржПржЗ ржЕржзрзНржпрж╛рзЯрзЗрж░ рж╕рж╛ржерзЗ ржЗржирзНржЯрж╛рж░рзЗржХрзНржЯ ржХрж░рзБржи!</h2>
        <p className="text-lg text-gray-700 dark:text-gray-300">
          ржкрзНрж░ржЬрзНржЮрж╛ AI ржПрж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ ржХрж░рзЗ ржПржЗ ржЕржзрзНржпрж╛рзЯ рж╕ржорзНржкрж░рзНржХрзЗ ржпрзЗржХрзЛржирзЛ ржкрзНрж░рж╢рзНржи ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рзБржиред ржХрзБржЗржЬрзЗ ржЕржВрж╢ ржирж┐рзЯрзЗ ржЖржкржирж╛рж░ ржЬрзНржЮрж╛ржи ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи ржПржмржВ рж╕рзНржХрзЛрж░ ржЕрж░рзНржЬржи ржХрж░рзБржи!
        </p>
      </div>

      <div className="max-w-4xl mx-auto bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-8">
        <h1 className="text-4xl font-semibold text-center text-gray-800 dark:text-white mb-8">ЁЯУШ ржЕржзрзНржпрж╛рзЯ - рзжрзз: ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛</h1>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb rotating-text">ЁЯФ░ ржЕржзрзНржпрж╛рзЯ ржкрж░рж┐ржЪрж┐рждрж┐</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400">
            ржПржЗ ржЕржзрзНржпрж╛рзЯрзЗ ржЖржорж░рж╛ рж╕ржВржЦрзНржпрж╛ ржкржжрзНржзрждрж┐рж░ ржорзМрж▓рж┐ржХ ржзрж╛рж░ржгрж╛, ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржмрж░рзНржЧ, ржмрж░рзНржЧржорзВрж▓, ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ ржирж┐ржпрж╝рзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░ржмред ржПржЗ ржЕржзрзНржпрж╛рзЯржЯрж┐ ржЧржгрж┐рждрзЗрж░ ржорзМрж▓рж┐ржХ ржмрж┐рж╖ржпрж╝ржЧрзБрж▓рзЛрж░ ржПржХржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЕржВрж╢, ржпрж╛ ржкрж░ржмрж░рзНрждрзА ржЕржзрзНржпрж╛рзЯржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржнрж┐рждрзНрждрж┐ рждрзИрж░рж┐ ржХрж░рзЗред ржПржЦрж╛ржирзЗ ржЖржорж░рж╛ ржмрж░рзНржЧ ржУ ржмрж░рзНржЧржорзВрж▓рзЗрж░ ржзрж╛рж░ржгрж╛, ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ ржзрж░рзНржо, ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржкржжрзНржзрждрж┐, ржПржмржВ ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛рж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржирж┐ржпрж╝рзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржЬрж╛ржиржмред
          </p>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзж рж╕ржВржЦрзНржпрж╛рж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж</h2>
          <table className="w-full border-collapse border border-gray-300 mb-4">
            <thead>
              <tr className="bg-gray-100">
                <th className="border border-gray-300 p-2">ржкрзНрж░ржХрж╛рж░</th>
                <th className="border border-gray-300 p-2">рж╕ржВржЬрзНржЮрж╛</th>
                <th className="border border-gray-300 p-2">ржЙржжрж╛рж╣рж░ржг</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td className="border border-gray-300 p-2">ржмрж░рзНржЧ (Square)</td>
                <td className="border border-gray-300 p-2">ржХрзЛржирзЛ рж╕ржВржЦрзНржпрж╛ржХрзЗ ржирж┐ржЬрзЗрж░ рж╕рж╛ржерзЗ ржЧрзБржг ржХрж░рж▓рзЗ ржпрзЗ ржлрж▓ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="3^2 = 9" />, <InlineMath math="4^2 = 16" />
                </td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржмрж░рзНржЧржорзВрж▓ (Square Root)</td>
                <td className="border border-gray-300 p-2">ржХрзЛржирзЛ рж╕ржВржЦрзНржпрж╛рж░ ржорзВрж▓ рж╕ржВржЦрзНржпрж╛, ржпрж╛рж░ ржмрж░рзНржЧ ржерзЗржХрзЗ рж╕рзЗржЗ рж╕ржВржЦрзНржпрж╛ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="\sqrt{9} = 3" />, <InlineMath math="\sqrt{16} = 4" />
                </td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛ (Perfect Square)</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛ ржХрзЛржирзЛ ржкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧ рж╣рж┐рж╕рзЗржмрзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ред</td>
                <td className="border border-gray-300 p-2">рзз, рзк, рзп, рззрзм, рзирзл</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ рж╕ржВржЦрзНржпрж╛ (Natural Numbers)</td>
                <td className="border border-gray-300 p-2">рзз ржерзЗржХрзЗ рж╢рзБрж░рзБ рж╣ржУржпрж╝рж╛ рж╕ржХрж▓ ржкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛ред</td>
                <td className="border border-gray-300 p-2">рзз, рзи, рзй, тАж</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржкрзВрж░рзНржг рж╕ржВржЦрзНржпрж╛ (Integers)</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛рж░ ржХрзЛржирзЛ ржнржЧрзНржирж╛ржВрж╢ ржирзЗржЗред</td>
                <td className="border border-gray-300 p-2">рзж, рзз, -рзз, рзи, -рзи</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ (Rational Numbers)</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ (рж╣рж░ тЙа рзж)ред</td>
                <td className="border border-gray-300 p-2">рзз/рзи, рзй/рзк, рзз.рзирзл, рз╢.рзйрзйрзй...</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ (Irrational Numbers)</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ ржирж╛ ржПржмржВ ржжрж╢ржорж┐ржХ ржЕржВрж╢ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзЗ ржирж╛ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="\sqrt{2}" />, <InlineMath math="\sqrt{3}" />, ╧А
                </td>
              </tr>
            </tbody>
          </table>
          <h3 className="text-xl font-medium text-gray-600 dark:text-gray-400 mb-2">ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЯрж┐ржкрж╕</h3>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>ржмрж░рзНржЧржорзВрж▓ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп <InlineMath math="\sqrt{}" /> ржЪрж┐рж╣рзНржи ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред</li>
            <li>ржпржжрж┐ ржмрж░рзНржЧрзЗрж░ ржмрж╛рж╣рзБрж░ ржжрзИрж░рзНржШрзНржп <InlineMath math="a" /> рж╣ржпрж╝, рждржмрзЗ ржХрзНрж╖рзЗрждрзНрж░ржлрж▓ <InlineMath math="a^2" />ред</li>
            <li>ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧржорзВрж▓ рж╕ржмрж╕ржоржпрж╝ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ рж╕ржВржЦрзНржпрж╛ рж╣ржпрж╝ред</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзз ржмрж░рзНржЧрж╕ржВржЦрзНржпрж╛рж░ ржзрж░рзНржо</h2>
          <table className="w-full border-collapse border border-gray-300 mb-4">
            <thead>
              <tr className="bg-gray-100">
                <th className="border border-gray-300 p-2">ржзрж░рзНржо</th>
                <th className="border border-gray-300 p-2">ржмрж┐ржмрж░ржг</th>
                <th className="border border-gray-300 p-2">ржЙржжрж╛рж╣рж░ржг</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td className="border border-gray-300 p-2">ржПржХржХ рж╕рзНржерж╛ржирзАржпрж╝ ржЕржЩрзНржХ</td>
                <td className="border border-gray-300 p-2">ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзж, рзз, рзк, рзл, рзм, ржмрж╛ рзп ржерж╛ржХрзЗред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="4^2 = 16" />, <InlineMath math="5^2 = 25" />, <InlineMath math="9^2 = 81" />
                </td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржПржХржХ рж╕рзНржерж╛ржирзЗ ржмрж░рзНржЬрж┐ржд ржЕржЩрзНржХ</td>
                <td className="border border-gray-300 p-2">ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рж╕рзНржерж╛ржирзЗ рзи, рзй, рзн, ржмрж╛ рзо ржерж╛ржХрзЗ ржирж╛ред</td>
                <td className="border border-gray-300 p-2">рзйрзи, рзкрзн, рзмрзй, рзнрзо ржкрзВрж░рзНржгржмрж░рзНржЧ ржиржпрж╝ред</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржПржХржХ ржЕржЩрзНржХ рзз ржмрж╛ рзп</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рзз ржмрж╛ рзп, рждрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рзз рж╣ржпрж╝ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="1^2 = 1" />, <InlineMath math="9^2 = 81" />
                </td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржПржХржХ ржЕржЩрзНржХ рзй ржмрж╛ рзн</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рзй ржмрж╛ рзн, рждрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рзп рж╣ржпрж╝ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="3^2 = 9" />, <InlineMath math="7^2 = 49" />
                </td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржПржХржХ ржЕржЩрзНржХ рзк ржмрж╛ рзм</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛рж░ ржПржХржХ рзк ржмрж╛ рзм, рждрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржПржХржХ рзм рж╣ржпрж╝ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="4^2 = 16" />, <InlineMath math="6^2 = 36" />
                </td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">рж╢рзВржирзНржпрзЗрж░ рж╕ржВржЦрзНржпрж╛</td>
                <td className="border border-gray-300 p-2">ржпрзЗ рж╕ржВржЦрзНржпрж╛рж░ рж╢рзЗрж╖рзЗ ржмрж┐ржЬрзЛржбрж╝ рж╕ржВржЦрзНржпржХ рж╢рзВржирзНржп ржерж╛ржХрзЗ, рждрж╛ ржкрзВрж░рзНржгржмрж░рзНржЧ ржиржпрж╝ред</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="100 = 10^2" />, рззрзжрзжрзж ржкрзВрж░рзНржгржмрж░рзНржЧ ржиржпрж╝
                </td>
              </tr>
            </tbody>
          </table>
          <h3 className="text-xl font-medium text-gray-600 dark:text-gray-400 mb-2">ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЯрж┐ржкрж╕</h3>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>ржПржХржХ рж╕рзНржерж╛ржирзАржпрж╝ ржЕржЩрзНржХ ржжрзЗржЦрзЗ ржжрзНрж░рзБржд ржмрзБржЭрзЗ ржирзЗржУржпрж╝рж╛ ржпрж╛ржпрж╝ рж╕ржВржЦрзНржпрж╛ржЯрж┐ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж┐ ржирж╛ред</li>
            <li>рж╢рзВржирзНржпрзЗрж░ рж╕ржВржЦрзНржпрж╛ ржЬрзЛржбрж╝ рж╣рж▓рзЗ рждржмрзЗржЗ рж╕ржВржЦрзНржпрж╛ржЯрж┐ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣рждрзЗ ржкрж╛рж░рзЗред</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзи ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржкржжрзНржзрждрж┐</h2>
          <table className="w-full border-collapse border border-gray-300 mb-4">
            <thead>
              <tr className="bg-gray-100">
                <th className="border border-gray-300 p-2">ржкржжрзНржзрждрж┐</th>
                <th className="border border-gray-300 p-2">ржзрж╛ржкрж╕ржорзВрж╣</th>
                <th className="border border-gray-300 p-2">ржЙржжрж╛рж╣рж░ржг</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td className="border border-gray-300 p-2">ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХ</td>
                <td className="border border-gray-300 p-2">
                  рзз. рж╕ржВржЦрзНржпрж╛ржЯрж┐ржХрзЗ ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХрзЗ ржнрж╛ржЧ ржХрж░рзБржиред<br />
                  рзи. ржЧрзБржгржирзАржпрж╝ржХржЧрзБрж▓рзЛржХрзЗ ржЬрзЛржбрж╝рж╛ржпрж╝ ржЬрзЛржбрж╝рж╛ржпрж╝ рж╕рж╛ржЬрж╛ржиред<br />
                  рзй. ржкрзНрж░рждрж┐ ржЬрзЛржбрж╝рж╛ ржерзЗржХрзЗ ржПржХржЯрж┐ ржХрж░рзЗ ржирж┐ржиред<br />
                  рзк. ржирзЗржУржпрж╝рж╛ ржЧрзБржгржирзАржпрж╝ржХржЧрзБрж▓рзЛрж░ ржЧрзБржгржлрж▓ ржмрзЗрж░ ржХрж░рзБржиред
                </td>
                <td className="border border-gray-300 p-2">рзйрзм, рззрзмрзп, рзлрзирзп, рззрззрзжрзирзл, рззрзлрзирзз, рзйрззрзйрзм, рззрзжрзирзк</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржнрж╛ржЧ ржкржжрзНржзрждрж┐</td>
                <td className="border border-gray-300 p-2">
                  рзз. рж╕ржВржЦрзНржпрж╛ржЯрж┐рж░ ржЕржЩрзНржХржЧрзБрж▓рзЛржХрзЗ ржбрж╛ржи ржерзЗржХрзЗ ржЬрзЛржбрж╝рж╛ржпрж╝ ржЬрзЛржбрж╝рж╛ржпрж╝ ржнрж╛ржЧ ржХрж░рзБржиред<br />
                  рзи. ржмрж╛ржоржжрж┐ржХрзЗрж░ ржЬрзЛржбрж╝рж╛ ржерзЗржХрзЗ ржмрж░рзНржЧржорзВрж▓ рж╢рзБрж░рзБ ржХрж░рзБржиред<br />
                  рзй. ржмрж┐ржпрж╝рзЛржЧ ржХрж░рзЗ ржкрж░ржмрж░рзНрждрзА ржЬрзЛржбрж╝рж╛ ржирж╛ржорж╛ржиред<br />
                  рзк. ржирждрзБржи ржнрж╛ржЬржХ рждрзИрж░рж┐ ржХрж░рзЗ ржЧрзБржг ржУ ржмрж┐ржпрж╝рзЛржЧ ржХрж░рзБржиред<br />
                  рзл. ржнрж╛ржЧрж╢рзЗрж╖ рж╢рзВржирзНржп ржирж╛ рж╣ржУржпрж╝рж╛ ржкрж░рзНржпржирзНржд ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзБржиред
                </td>
                <td className="border border-gray-300 p-2">рзйрззрзмрзорзк, рзйрзпрзмрзп, рзирзирзл, рзпрзмрзз, рззрзжрзкрзжрзк</td>
              </tr>
            </tbody>
          </table>
          <h3 className="text-xl font-medium text-gray-600 dark:text-gray-400 mb-2">ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЯрж┐ржкрж╕</h3>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рж╕ржВржЦрзНржпрж╛рж░ ржЕржЩрзНржХрзЗрж░ ржЬрзЛржбрж╝рж╛рж░ рж╕ржВржЦрзНржпрж╛ ржжрзЗржЦрзЗ ржмрж░рзНржЧржорзВрж▓рзЗрж░ ржЕржЩрзНржХрзЗрж░ рж╕ржВржЦрзНржпрж╛ ржирж┐рж░рзНржгржпрж╝ ржХрж░рж╛ ржпрж╛ржпрж╝ред</li>
            <li>ржЙржжрж╛рж╣рж░ржг: <InlineMath math="\sqrt{81} = 9" /> (ржПржХ ржЕржЩрзНржХ), <InlineMath math="\sqrt{100} = 10" /> (ржжрзБржЗ ржЕржЩрзНржХ)ред</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзй ржмрж░рзНржЧ ржУ ржмрж░рзНржЧржорзВрж▓ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ рж╕ржорж╕рзНржпрж╛</h2>
          <table className="w-full border-collapse border border-gray-300 mb-4">
            <thead>
              <tr className="bg-gray-100">
                <th className="border border-gray-300 p-2">рж╕ржорж╕рзНржпрж╛рж░ ржзрж░ржг</th>
                <th className="border border-gray-300 p-2">ржмрж┐ржмрж░ржг</th>
                <th className="border border-gray-300 p-2">ржЙржжрж╛рж╣рж░ржг</th>
                <th className="border border-gray-300 p-2">рж╕рзВрждрзНрж░</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td className="border border-gray-300 p-2">ржЧрзБржг/ржнрж╛ржЧ ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ</td>
                <td className="border border-gray-300 p-2">ржХрзНрж╖рзБржжрзНрж░рждржо рж╕ржВржЦрзНржпрж╛ ржжрзНржмрж╛рж░рж╛ ржЧрзБржг/ржнрж╛ржЧ ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж░рж╛ред</td>
                <td className="border border-gray-300 p-2">рззрзкрзн ржХрзЗ рзй ржжрзНржмрж╛рж░рж╛ ржЧрзБржг, рзпрзнрзи ржХрзЗ рзй ржжрзНржмрж╛рж░рж╛ ржнрж╛ржЧ</td>
                <td className="border border-gray-300 p-2">ржорзМрж▓рж┐ржХ ржЧрзБржгржирзАржпрж╝ржХрзЗрж░ ржЬрзЛржбрж╝рж╛ржмрж┐рж╣рзАржи ржЕржВрж╢</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржпрзЛржЧ/ржмрж┐ржпрж╝рзЛржЧ ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ</td>
                <td className="border border-gray-300 p-2">ржХрзНрж╖рзБржжрзНрж░рждржо рж╕ржВржЦрзНржпрж╛ ржпрзЛржЧ/ржмрж┐ржпрж╝рзЛржЧ ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж░рж╛ред</td>
                <td className="border border-gray-300 p-2">рзкрзмрзйрзп ржерзЗржХрзЗ рззрзл ржмрж┐ржпрж╝рзЛржЧ, рзлрзмрзжрзл ржПрж░ рж╕рж╛ржерзЗ рзирзж ржпрзЛржЧ</td>
                <td className="border border-gray-300 p-2">ржмрж┐ржпрж╝рзЛржЧржлрж▓ ржмрж╛ (n+1)┬▓ тИТ рж╕ржВржЦрзНржпрж╛</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржмрж╛рж╕рзНрждржмржнрж┐рждрзНрждрж┐ржХ рж╕ржорж╕рзНржпрж╛</td>
                <td className="border border-gray-300 p-2">ржмрж╛ржЧрж╛ржи, рж╕рзИржирзНржпржжрж▓ ржмрж╛ ржорж╛рж░рзНржмрзЗрж▓ рж╕рж╛ржЬрж╛ржирзЛрж░ рж╕ржорж╕рзНржпрж╛ред</td>
                <td className="border border-gray-300 p-2">рззрзирзпрзм ржЖржоржЧрж╛ржЫ, рзлрзмрзнрзирзо рж╕рзИржирзНржп, рзирзнрзжрзк рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзА</td>
                <td className="border border-gray-300 p-2">ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">рж╕ржжрж╕рзНржп рж╕ржВржЦрзНржпрж╛/ржоржЬрзБрж░рж┐</td>
                <td className="border border-gray-300 p-2">рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ ржмрж╛ рж╢рзНрж░ржорж┐ржХрзЗрж░ ржоржЬрзБрж░рж┐ рж╣рж┐рж╕рж╛ржмред</td>
                <td className="border border-gray-300 p-2">рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐рж░ рж╕ржжрж╕рзНржп рж╕ржВржЦрзНржпрж╛, ржзрж╛ржиржХрзНрж╖рзЗрждрзЗрж░ ржоржЬрзБрж░рж┐</td>
                <td className="border border-gray-300 p-2">x ├Ч ржЧрзБржгржХ ├Ч x = ржорзЛржЯ ржЯрж╛ржХрж╛</td>
              </tr>
              <tr>
                <td className="border border-gray-300 p-2">ржХрзНрж░ржорж┐ржХ рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржЕржирзНрждрж░</td>
                <td className="border border-gray-300 p-2">ржжрзБржЯрж┐ ржХрзНрж░ржорж┐ржХ рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧрзЗрж░ ржЕржирзНрждрж░ ржирж┐рж░рзНржгржпрж╝ред</td>
                <td className="border border-gray-300 p-2">рзкрзж, рзкрзз ржПрж░ ржмрж░рзНржЧрзЗрж░ ржЕржирзНрждрж░</td>
                <td className="border border-gray-300 p-2">
                  <InlineMath math="(x+1)^2 - x^2 = 2x + 1" />
                </td>
              </tr>
            </tbody>
          </table>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзк ржжрж╢ржорж┐ржХ ржнржЧрзНржирж╛ржВрж╢рзЗрж░ ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400 mb-2">ржжрж╢ржорж┐ржХ ржнржЧрзНржирж╛ржВрж╢рзЗрж░ ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржирж┐ржпрж╝ржо:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>ржЕржЦржгрзНржб ржЕржВрж╢рзЗ ржПржХржХ ржерзЗржХрзЗ ржмрж╛ржорзЗ ржкрзНрж░рждрж┐ ржжрзБржЗ ржЕржЩрзНржХрзЗ ржжрж╛ржЧ ржжрж┐ржиред</li>
            <li>ржжрж╢ржорж┐ржХ ржЕржВрж╢рзЗ ржжрж╢ржорж┐ржХ ржмрж┐ржирзНржжрзБрж░ ржбрж╛ржи ржерзЗржХрзЗ ржЬрзЛржбрж╝рж╛ржпрж╝ ржжрж╛ржЧ ржжрж┐ржиред</li>
            <li>ржЕржЦржгрзНржб ржЕржВрж╢рзЗрж░ ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ ржмрж░рзНржЧржорзВрж▓рзЗ ржжрж╢ржорж┐ржХ ржмрж┐ржирзНржжрзБ ржжрж┐ржиред</li>
            <li>ржжрж╢ржорж┐ржХ ржЕржВрж╢рзЗрж░ ржкрзНрж░рждрж┐ ржЬрзЛржбрж╝рж╛ рж╢рзВржирзНржпрзЗрж░ ржЬржирзНржп ржмрж░рзНржЧржорзВрж▓рзЗ ржПржХржЯрж┐ рж╢рзВржирзНржп ржжрж┐ржиред</li>
          </ul>
          <p className="text-lg text-gray-600 dark:text-gray-400 mt-2">ржЙржжрж╛рж╣рж░ржг:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рзж.рзйрзм, рзи.рзирзл, рзирзм.рзлрзирзирзл, рзж.рзжрзжрзирзпрзСрзм, рзж.рзжрзжрзкрзп, рзмрзкрзз.рззрзжрзирзк, рзж.рзжрзжрзжрзлрзнрзм, рззрзкрзк.рзорзкрззрзирзирзл</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзл ржмрж░рзНржЧржорзВрж▓рзЗрж░ ржЖрж╕ржирзНржи ржорж╛ржи ржирж┐рж░рзНржгржпрж╝</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400 mb-2">ржирж┐ржпрж╝ржо:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рждрж┐ржи ржжрж╢ржорж┐ржХ рж╕рзНржерж╛ржи ржкрж░рзНржпржирзНржд ржмрж░рзНржЧржорзВрж▓ ржирж┐рж░рзНржгржпрж╝рзЗрж░ ржЬржирзНржп ржжрж╢ржорж┐ржХрзЗрж░ ржкрж░ ржХржоржкржХрзНрж╖рзЗ рзмржЯрж┐ ржЕржЩрзНржХ ржирж┐ржиред</li>
            <li>ржкрзНрж░ржпрж╝рзЛржЬржирзЗ рж╢рзЗрж╖рзЗ рж╢рзВржирзНржп ржпрзЛржЧ ржХрж░рзБржиред</li>
            <li>ржжрзБржЗ ржжрж╢ржорж┐ржХ рж╕рзНржерж╛ржирзЗрж░ ржЬржирзНржп рждрж┐ржи ржжрж╢ржорж┐ржХ рж╕рзНржерж╛ржи ржкрж░рзНржпржирзНржд ржЧржгржирж╛ ржХрж░рзБржиред</li>
            <li>ржкрж░рзЗрж░ ржЕржЩрзНржХ рзж-рзк рж╣рж▓рзЗ ржкрзВрж░рзНржмрзЗрж░ ржЕржЩрзНржХрзЗ рзз ржпрзЛржЧ рж╣ржпрж╝ ржирж╛ред</li>
            <li>ржкрж░рзЗрж░ ржЕржЩрзНржХ рзл-рзп рж╣рж▓рзЗ ржкрзВрж░рзНржмрзЗрж░ ржЕржЩрзНржХрзЗ рзз ржпрзЛржЧ рж╣ржпрж╝ред</li>
          </ul>
          <p className="text-lg text-gray-600 dark:text-gray-400 mt-2">ржЙржжрж╛рж╣рж░ржг:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рзж.рзйрзм, рзирзй.рзирзк, рзн, рзлрзж.рзмрзпрзкрзк, рззрзирзй, рзн.рззрзи, рзп.рзирзлрзй, рзм/рзн, рзи рзл/рзм, рзн рзп/рззрзй</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзм ржнржЧрзНржирж╛ржВрж╢рзЗрж░ ржмрж░рзНржЧржорзВрж▓</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400 mb-2">ржирж┐ржпрж╝ржо:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рж▓ржм ржУ рж╣рж░ ржкрзВрж░рзНржгржмрж░рзНржЧ рж╣рж▓рзЗ ржнржЧрзНржирж╛ржВрж╢ржЯрж┐ ржкрзВрж░рзНржгржмрж░рзНржЧред</li>
            <li>рж▓ржмрзЗрж░ ржмрж░рзНржЧржорзВрж▓ржХрзЗ рж╣рж░рзЗрж░ ржмрж░рзНржЧржорзВрж▓ ржжрж┐ржпрж╝рзЗ ржнрж╛ржЧ ржХрж░рзБржиред</li>
            <li>рж╣рж░ ржкрзВрж░рзНржгржмрж░рзНржЧ ржирж╛ рж╣рж▓рзЗ ржЧрзБржг ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж░рзБржиред</li>
          </ul>
          <p className="text-lg text-gray-600 dark:text-gray-400 mt-2">ржЙржжрж╛рж╣рж░ржг:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рзирзн рзкрзм/рзкрзп, рзз/рзмрзк, рзкрзп/рззрзирзз, рззрзз рзпрзн/рззрзкрзк, рзйрзи рзирзкрзз/рзйрзирзк, рзмрзк/рзорзз, рзлрзи рзп/рззрзм, рзи рзо/рззрзл, рзз рзк/рзл</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзн ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж ржпрж╛ржЪрж╛ржЗ</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400 mb-2">ржирж┐ржпрж╝ржо:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ ржнржЧрзНржирж╛ржВрж╢ ржЖржХрж╛рж░рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ ржПржмржВ ржжрж╢ржорж┐ржХ ржЕржВрж╢ ржирж┐рж░рзНржжрж┐рж╖рзНржЯред</li>
            <li>ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛рж░ ржжрж╢ржорж┐ржХ ржЕржВрж╢ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐ ржХрж░рзЗ ржирж╛ ржПржмржВ ржнржЧрзНржирж╛ржВрж╢рзЗ рж▓рзЗржЦрж╛ ржпрж╛ржпрж╝ ржирж╛ред</li>
            <li>ржкрзВрж░рзНржгржмрж░рзНржЧ рж╕ржВржЦрзНржпрж╛рж░ ржмрж░рзНржЧржорзВрж▓ ржорзВрж▓ржж, ржЕржирзНржпржерж╛ржпрж╝ ржЕржорзВрж▓ржжред</li>
          </ul>
          <p className="text-lg text-gray-600 dark:text-gray-400 mt-2">ржЙржжрж╛рж╣рж░ржг:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рзз рзз/рзи, рзк/рзирзл, рзирзн/рззрзм, рзз.рзжрзлрзмрзй, <InlineMath math="\sqrt{32}" />, <InlineMath math="\sqrt{121}" />, рзж.рззрзи, <InlineMath math="\sqrt{25}" />, <InlineMath math="\sqrt{72}" />, рзкрзп/рзн</li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзо рж╕ржВржЦрзНржпрж╛рж░рзЗржЦрж╛ржпрж╝ ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400 mb-2">ржирж┐ржпрж╝ржо:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>ржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ржХрзЗ ржнржЧрзНржирж╛ржВрж╢ ржмрж╛ ржжрж╢ржорж┐ржХ ржЖржХрж╛рж░рзЗ рж╕ржВржЦрзНржпрж╛рж░рзЗржЦрж╛ржпрж╝ рж╕рзНржерж╛ржкржи ржХрж░рж╛ ржпрж╛ржпрж╝ред</li>
            <li>ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛ (ржпрзЗржоржи <InlineMath math="\sqrt{2}" />, <InlineMath math="\sqrt{3}" />) ржЬрзНржпрж╛ржорж┐рждрж┐ржХ ржкржжрзНржзрждрж┐ ржмрж╛ ржЖрж╕ржирзНржи ржорж╛ржи ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рзНржерж╛ржкржи ржХрж░рж╛ рж╣ржпрж╝ред</li>
          </ul>
          <p className="text-lg text-gray-600 dark:text-gray-400 mt-2">ржЙржжрж╛рж╣рж░ржг:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li><InlineMath math="\sqrt{2}" />, рзз рзй/рзк, <InlineMath math="\sqrt{3}" />, рзи/рзй, рзз.рзкрзлрзл, <InlineMath math="\sqrt{5}" /></li>
          </ul>
        </section>

        <section className="mb-6">
          <h2 className="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-4">рзз.рзжрзп рж╕рзГржЬржирж╢рзАрж▓ ржкрзНрж░рж╢рзНржи</h2>
          <p className="text-lg text-gray-600 dark:text-gray-400 mb-2">ржзрж░ржг:</p>
          <ul className="list-disc pl-6 text-lg text-gray-600 dark:text-gray-400">
            <li>рж╕ржВржЦрзНржпрж╛ ржпрж╛ржЪрж╛ржЗ ржУ ржкрзВрж░рзНржгржмрж░рзНржЧржХрж░ржг: рж╕ржВржЦрзНржпрж╛ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж┐ржирж╛ ржпрж╛ржЪрж╛ржЗ ржПржмржВ ржЧрзБржг/ржнрж╛ржЧ ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж░рж╛ред</li>
            <li>ржпрзЛржЧ/ржмрж┐ржпрж╝рзЛржЧрзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ: ржХрзНрж╖рзБржжрзНрж░рждржо рж╕ржВржЦрзНржпрж╛ ржпрзЛржЧ/ржмрж┐ржпрж╝рзЛржЧ ржХрж░рзЗ ржкрзВрж░рзНржгржмрж░рзНржЧ ржХрж░рж╛ред</li>
            <li>ржХрзНрж░ржорж┐ржХ рж╕ржВржЦрзНржпрж╛рж░ рж╕ржорж╕рзНржпрж╛: ржмрж░рзНржЧрзЗрж░ ржЕржирзНрждрж░ ржерзЗржХрзЗ рж╕ржВржЦрзНржпрж╛ ржирж┐рж░рзНржгржпрж╝ред</li>
            <li>ржмрж╛рж╕рзНрждржм ржЬрзАржмржирзЗрж░ рж╕ржорж╕рзНржпрж╛: ржмрж╛ржЧрж╛ржи, рж╕рзИржирзНржпржжрж▓, ржоржЬрзБрж░рж┐ рж╕ржВржХрзНрж░рж╛ржирзНржд рж╕ржорж╕рзНржпрж╛ред</li>
            <li>ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЬрзНржЮрж╛: рж╕ржВржЬрзНржЮрж╛ ржУ ржЙржжрж╛рж╣рж░ржгрж╕рж╣ ржмрзНржпрж╛ржЦрзНржпрж╛ред</li>
          </ul>
        </section>
      </div>

      {isChatModalOpen && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 ">
          <div className="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md h-[80vh] flex flex-col">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-xl font-bold text-gray-800 dark:text-white">ржкрзНрж░ржЬрзНржЮрж╛ AI ржПрж░ рж╕рж╛ржерзЗ ржЪрзНржпрж╛ржЯ</h2>
              <button
                onClick={() => setIsChatModalOpen(false)}
                className="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:text-white"
              >
                тЬХ
              </button>
            </div>
            <div className="flex-1 overflow-y-auto mb-4">
              {chatHistory.map((msg, index) => (
                <div
                  key={index}
                  className={`mb-3 flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
                >
                  <div
                    className={`max-w-[75%] p-3 rounded-lg overflow-wrap break-words ${
                      msg.role === 'user' ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-800 dark:text-white'
                    }`}
                    style={{ wordBreak: 'break-all' }}
                  >
                    <ReactMarkdown
                      remarkPlugins={[remarkMath]}
                      rehypePlugins={[rehypeKatex]}
                      components={{
                        p({ children }) {
                          return <p className="break-words">{children}</p>;
                        },
                      }}
                    >
                      {msg.content}
                    </ReactMarkdown>
                  </div>
                </div>
              ))}
            </div>
            <div className="flex gap-2">
              <input
                type="text"
                value={message}
                onChange={(e) => setMessage(e.target.value)}
                placeholder="ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржи..."
                className="flex-1 p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"
              />
              <button
                onClick={handleSubmit}
                disabled={loading}
                className="p-3 bg-blue-500 text-white rounded-full hover:bg-blue-600 transition-colors disabled:bg-gray-300"
              >
                {loading ? (
                  <svg className="w-5 h-5 animate-spin" fill="none" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z" />
                  </svg>
                ) : (
                  'ржкрж╛ржарж╛ржи'
                )}
              </button>
            </div>
          </div>
        </div>
      )}

      {isQuizModalOpen && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 ">
          <div className="bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-xl font-bold text-gray-800 dark:text-white">ржХрзБржЗржЬ: ржорзВрж▓ржж ржУ ржЕржорзВрж▓ржж рж╕ржВржЦрзНржпрж╛</h2>
              <button
                onClick={() => setIsQuizModalOpen(false)}
                className="text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:text-white"
              >
                тЬХ
              </button>
            </div>
            {quizQuestions.map((q, index) => (
              <div key={index} className="mb-6">
                <p className="text-lg font-medium text-gray-700 dark:text-gray-300">{index + 1}. {q.question}</p>
                <div className="space-y-2 mt-2">
                  {q.options.map((option, optIndex) => {
                    const optionValue = typeof option === 'string' ? option : 'math' in option ? option.props.math : '';
                    const isChecked = quizAnswers[index] === optionValue;
                    return (
                      <label key={optIndex} className="flex items-center gap-2">
                        <input
                          type="radio"
                          name={`question-${index}`}
                          value={optionValue}
                          checked={isChecked}
                          onChange={() =>
                            setQuizAnswers({
                              ...quizAnswers,
                              [index]: optionValue,
                            })
                          }
                          disabled={quizSubmitted}
                          className="h-4 w-4 text-blue-600"
                        />
                        <span className="text-gray-600 dark:text-gray-400">{option}</span>
                      </label>
                    );
                  })}
                </div>
                {quizSubmitted && (
                  <div className="mt-2 p-3 bg-gray-100 rounded-lg">
                    <p
                      className={
                        quizAnswers[index] === (typeof q.correctAnswer === 'string' ? q.correctAnswer : q.correctAnswer.props.math)
                          ? 'text-green-600'
                          : 'text-red-600'
                      }
                    >
                      {quizAnswers[index] === (typeof q.correctAnswer === 'string' ? q.correctAnswer : q.correctAnswer.props.math)
                        ? 'рж╕ржарж┐ржХ!'
                        : 'ржнрзБрж▓!'}
                    </p>
                    <p className="text-gray-600 dark:text-gray-400">{q.explanation}</p>
                  </div>
                )}
              </div>
            ))}
            {quizSubmitted ? (
              <div className="mb-4">
                <p className="text-lg font-bold text-gray-800 dark:text-white">ржЖржкржирж╛рж░ рж╕рзНржХрзЛрж░: {score}/25</p>
                <button
                  onClick={handleQuizReset}
                  className="mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"
                >
                  ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи
                </button>
              </div>
            ) : (
              <button
                onClick={handleQuizSubmit}
                className="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"
              >
                ржЬржорж╛ ржжрж┐ржи
              </button>
            )}
          </div>
        </div>
      )}
    </div>
  );
};

export default MathChapter1;